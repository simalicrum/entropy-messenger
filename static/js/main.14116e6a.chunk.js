(this["webpackJsonpentropy-messenger"]=this["webpackJsonpentropy-messenger"]||[]).push([[0],{138:function(e,t,n){e.exports=n(158)},143:function(e,t,n){},144:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},158:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(46),o=n.n(r),u=(n(143),n(26)),s=(n(144),n(173)),i=n(105),l=function(e){var t=Object(a.useState)(),n=Object(u.a)(t,2),r=n[0],o=n[1];return Object(a.useEffect)((function(){switch(e.chat.type){case"private":var t=e.chat.users.filter((function(t){return t.id!==e.user}));e.db.collection("users").doc(t[0].id).get().then((function(e){o(e.data().name)}))}}),[e.chat]),c.a.createElement(s.a.Item,{key:i(),name:r,active:!0})},d=(n(147),n(105),function(e){var t=Object(a.useState)("Test 1"),n=Object(u.a)(t,2);n[0],n[1];return c.a.createElement(s.a,{secondary:!0,vertical:!0},e.chats.map((function(t){return c.a.createElement(l,{chat:t,db:e.db,user:e.user})})))}),m=n(172),f=n(171),p=n(175),b=(n(148),n(174)),h=function(e){return c.a.createElement(b.a,null,c.a.createElement(b.a.Content,null,c.a.createElement(b.a.Author,{as:"a"},e.data.name),c.a.createElement(b.a.Metadata,null,c.a.createElement("div",null,e.data.date.toDate().getHours()+":"+e.data.date.toDate().getMinutes())),c.a.createElement(b.a.Text,null,e.data.content)))},E=n(105),g=function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),r=n[0],o=n[1];return Object(a.useEffect)((function(){e.db.collection("6XXpczgGdrSBUf0Gb5Nt").orderBy("date","asc").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data()}));Promise.resolve().then((function(){o(t)}))}))}),[]),c.a.createElement(b.a.Group,null,r.map((function(t){return c.a.createElement(h,{key:E(),data:t,db:e.db})})))},v=function(e){return c.a.createElement("div",null,c.a.createElement(g,{db:e.db}),c.a.createElement(m.a,{onSubmit:function(t){t.preventDefault(),e.db.collection("6XXpczgGdrSBUf0Gb5Nt").add({name:e.name,author:e.db.doc("/users/"+e.user),date:e.dbFunc.Timestamp.now(),content:t.target.reply.value}).catch((function(e){console.error("Error adding document: ",e)})).then((function(){t.target.reply.value=""}))}},c.a.createElement(f.a,{id:"reply",name:"reply",placeholder:"Reply"}),c.a.createElement(p.a,{type:"submit",floated:"right"},"Send")))},y=(n(152),n(176)),j=n(71);n(153),n(155);j.initializeApp({apiKey:"AIzaSyCiemC3RJx8s3kHs4Y2SasrhG_epoQjEDw",authDomain:"entropy-messenger.firebaseapp.com",databaseURL:"https://entropy-messenger.firebaseio.com",projectId:"entropy-messenger",storageBucket:"entropy-messenger.appspot.com",messagingSenderId:"739103714260",appId:"1:739103714260:web:9f34197363bb3b2e4dc441",measurementId:"G-WNTGXPFSRH"});var O=j.firestore(),S=j.firestore,w=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(),s=Object(u.a)(o,2),i=s[0],l=s[1],m=Object(a.useState)([]),f=Object(u.a)(m,2),p=f[0],b=f[1];return Object(a.useEffect)((function(){var e=new j.auth.GoogleAuthProvider;j.auth().signInWithPopup(e).then((function(e){O.collection("users").doc(e.user.uid).get().then((function(t){t.exists?(r(e.user.uid),l(e.user.displayName)):O.collection("users").doc(e.user.uid).set({name:e.user.displayName,email:e.user.email,chats:[]},{merge:!1})}))}))}),[]),Object(a.useEffect)((function(){void 0!==n&&O.collection("users").doc(n).get().then((function(e){e.data().chats.forEach((function(e){O.collection("chats").doc(e).get().then((function(e){b(p.concat(e.data()))}))}))}))}),[n]),c.a.createElement(y.a,null,c.a.createElement(y.a.Column,{width:3},c.a.createElement(d,{db:O,dbFunc:S,user:n,chats:p})),c.a.createElement(y.a.Column,{width:4},c.a.createElement(v,{db:O,dbFunc:S,user:n,name:i})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[138,1,2]]]);
//# sourceMappingURL=main.14116e6a.chunk.js.map